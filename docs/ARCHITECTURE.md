# Catering Pro - Sistem Mimarisi

## ğŸ¯ Genel BakÄ±ÅŸ

Catering Pro, hazÄ±r yemek sektÃ¶rÃ¼ iÃ§in geliÅŸtirilmiÅŸ entegre iÅŸ yÃ¶netim sistemidir. Ä°hale takibinden bordro hesaplamaya, stok yÃ¶netiminden menÃ¼ planlamaya kadar tÃ¼m operasyonel sÃ¼reÃ§leri tek platformda yÃ¶netir.

---

## ğŸ—ï¸ Mimari Diyagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND (Next.js)                        â”‚
â”‚                         Port: 3000                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Ä°hale   â”‚  â”‚ Muhasebe â”‚  â”‚ Planlama â”‚  â”‚ AI Chat  â”‚        â”‚
â”‚  â”‚  ModÃ¼lÃ¼  â”‚  â”‚  ModÃ¼lÃ¼  â”‚  â”‚  ModÃ¼lÃ¼  â”‚  â”‚  ModÃ¼lÃ¼  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/REST
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND (Express)                         â”‚
â”‚                         Port: 3001                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      API Routes                           â”‚  â”‚
â”‚  â”‚  /auth  /cariler  /stok  /personel  /bordro  /ai  ...    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Services                             â”‚  â”‚
â”‚  â”‚  Gemini AI â”‚ Claude AI â”‚ Document â”‚ Export â”‚ Scheduler   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚
                    â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    PostgreSQL     â”‚  â”‚   External APIs   â”‚
        â”‚    (Supabase)     â”‚  â”‚  Gemini, Claude   â”‚
        â”‚                   â”‚  â”‚  ihalebul.com     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ModÃ¼ller

### 1. Ä°hale Takip ModÃ¼lÃ¼
**AmaÃ§:** Kamu ihalelerini takip etme ve deÄŸerlendirme

```
Ã–zellikler:
â”œâ”€â”€ Otomatik scraping (ihalebul.com)
â”œâ”€â”€ DÃ¶kÃ¼man yÃ¼kleme ve AI analizi
â”œâ”€â”€ Ä°hale takvimi
â”œâ”€â”€ Åehir/kurum bazlÄ± filtreleme
â””â”€â”€ YaklaÅŸan ihaleler bildirimi
```

### 2. Muhasebe ModÃ¼lÃ¼
**AmaÃ§:** Finansal iÅŸlemlerin yÃ¶netimi

```
Alt ModÃ¼ller:
â”œâ”€â”€ Cari Hesaplar (MÃ¼ÅŸteri/TedarikÃ§i)
â”œâ”€â”€ Fatura YÃ¶netimi
â”œâ”€â”€ Stok/Depo YÃ¶netimi
â”œâ”€â”€ Kasa-Banka
â”œâ”€â”€ Gelir-Gider
â”œâ”€â”€ Ã‡ek-Senet
â””â”€â”€ DemirbaÅŸ
```

### 3. Ä°nsan KaynaklarÄ± ModÃ¼lÃ¼
**AmaÃ§:** Personel ve bordro yÃ¶netimi

```
Alt ModÃ¼ller:
â”œâ”€â”€ Personel KayÄ±tlarÄ±
â”œâ”€â”€ Proje AtamalarÄ±
â”œâ”€â”€ Bordro Hesaplama (SGK, Vergi, AGÄ°)
â”œâ”€â”€ Ä°zin YÃ¶netimi
â”œâ”€â”€ MaaÅŸ Ã–demeleri
â””â”€â”€ Tazminat Hesaplama
```

### 4. Ãœretim Planlama ModÃ¼lÃ¼
**AmaÃ§:** MenÃ¼ ve malzeme planlamasÄ±

```
Alt ModÃ¼ller:
â”œâ”€â”€ ReÃ§ete YÃ¶netimi
â”œâ”€â”€ MenÃ¼ OluÅŸturma
â”œâ”€â”€ Gramaj Åartnameleri
â”œâ”€â”€ Malzeme Ä°htiyaÃ§ Hesaplama
â””â”€â”€ Proje BazlÄ± Planlama
```

### 5. AI Asistan ModÃ¼lÃ¼
**AmaÃ§:** AkÄ±llÄ± yardÄ±mcÄ± ve analiz

```
Ã–zellikler:
â”œâ”€â”€ DÃ¶kÃ¼man OCR ve analizi (Gemini)
â”œâ”€â”€ Sohbet asistanÄ± (Claude)
â”œâ”€â”€ KonuÅŸma hafÄ±zasÄ±
â””â”€â”€ Tool-based iÅŸlemler
```

---

## ğŸ—ƒï¸ VeritabanÄ± ÅemasÄ±

### Entity Relationship (Ã–zet)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   tenders   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  documents  â”‚       â”‚    users    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   cariler   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  invoices   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                     â”‚
      â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cari_harek. â”‚       â”‚invoice_itemsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚stok_kartlariâ”‚â”€â”€â”€â”€â”€â”€â–¶â”‚stok_harek.  â”‚       â”‚   depolar   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚depo_lokasyonâ”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ personeller â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚   bordro    â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚bordro_detay â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚izin_talepleriâ”‚       â”‚ projeler   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚proje_person.â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  receteler  â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚recete_malz. â”‚       â”‚   menuler   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚menu_yemeklerâ”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” GÃ¼venlik

### Authentication
- JWT token based authentication
- NextAuth.js (frontend)
- bcrypt password hashing

### Authorization
- Role-based access (admin, user)
- Row Level Security (Supabase RLS)

### Data Protection
- Parameterized SQL queries
- Input validation
- CORS configuration
- HTTPS (production)

---

## ğŸ”„ Veri AkÄ±ÅŸÄ±

### Ä°hale Scraping Flow
```
Scheduler â†’ Puppeteer â†’ ihalebul.com â†’ Parse â†’ PostgreSQL
                                          â†“
                              Gemini AI (ÅŸehir normalizasyonu)
```

### DÃ¶kÃ¼man Analiz Flow
```
Upload â†’ File Storage â†’ Gemini AI â†’ Extract Text â†’ Analyze â†’ Store
                                                      â†“
                                              JSON (analysis_result)
```

### Bordro Hesaplama Flow
```
Personel Data â†’ SGK Parametreleri â†’ Netâ†’BrÃ¼t Hesap â†’ Kesintiler â†’ Bordro
                      â†“
              Gelir Vergisi Dilimleri
                      â†“
              AGÄ° Hesaplama
```

---

## ğŸ“ˆ Performans

### Caching
- API response caching (gelecek)
- Static file caching (Next.js)

### Database Optimization
- Strategic indexes
- Query optimization
- Connection pooling

### Monitoring
- Backend logs (server.log)
- Scraper logs (scraper_output.log)
- Error tracking (gelecek: Sentry)

---

## ğŸš€ Deployment

### Development
```bash
# Backend
cd backend && npm run dev

# Frontend
cd frontend && npm run dev

# Database
docker-compose up -d
```

### Production (Railway)
```
Backend: Node.js service
Frontend: Next.js service
Database: Supabase (external)
```

---

## ğŸ“‹ Gelecek GeliÅŸtirmeler

1. **Mobile App** - React Native veya Flutter
2. **e-Fatura** - GÄ°B entegrasyonu
3. **Uyumsoft Sync** - Tam muhasebe entegrasyonu
4. **Dashboard** - GeliÅŸmiÅŸ raporlama
5. **Notifications** - Push/email bildirimleri
6. **Multi-tenant** - Ã‡oklu firma desteÄŸi

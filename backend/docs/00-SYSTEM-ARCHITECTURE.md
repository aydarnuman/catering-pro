# Ä°hale Motoru - Sistem Mimarisi

BaÄŸÄ±msÄ±z ihale dÃ¶kÃ¼man toplama ve analiz sistemi.

---

## ğŸ¯ Genel BakÄ±ÅŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Ä°HALE MOTORU v5.2                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   SCRAPER   â”‚â”€â”€â”€â–¶â”‚   STORAGE   â”‚â”€â”€â”€â–¶â”‚  PIPELINE   â”‚â”€â”€â”€â–¶â”‚     API     â”‚    â”‚
â”‚   â”‚   KATMANI   â”‚    â”‚   KATMANI   â”‚    â”‚   KATMANI   â”‚    â”‚   KATMANI   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚            â”‚
â”‚         â–¼                  â–¼                  â–¼                  â–¼            â”‚
â”‚   ihalebul.com      PostgreSQL         Claude AI          REST API           â”‚
â”‚                     Supabase           Haiku+Sonnet       72+ endpoint       â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š DetaylÄ± Sistem DiagramÄ±

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                    Ä°NTERNET                                       â•‘
â•‘                               ihalebul.com                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                                       â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            1. SCRAPER KATMANI                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â•‘
â•‘   â”‚  browser-manager  â”‚â—„â”€â”€â”€â”€ Puppeteer Singleton                                 â•‘
â•‘   â”‚    .js            â”‚      â€¢ Headless Chrome                                   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â€¢ Tek instance                                      â•‘
â•‘             â”‚                                                                     â•‘
â•‘             â–¼                                                                     â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â•‘
â•‘   â”‚  session-manager  â”‚â”€â”€â”€â”€â–¶â”‚  storage/         â”‚                               â•‘
â•‘   â”‚    .js            â”‚     â”‚  session.json     â”‚                               â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â•‘
â•‘             â”‚                â€¢ Cookie saklama                                    â•‘
â•‘             â”‚                â€¢ 8 saat TTL                                        â•‘
â•‘             â–¼                â€¢ Otomatik yenileme                                 â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â•‘
â•‘   â”‚   login-service   â”‚â—„â”€â”€â”€â”€ .env credentials                                    â•‘
â•‘   â”‚    .js            â”‚      â€¢ IHALEBUL_USERNAME                                 â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â€¢ IHALEBUL_PASSWORD                                 â•‘
â•‘             â”‚                                                                     â•‘
â•‘             â–¼                                                                     â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â•‘
â•‘   â”‚   list-scraper    â”‚â”€â”€â”€â”€â–¶â”‚ document-scraper  â”‚                               â•‘
â•‘   â”‚    .js            â”‚     â”‚    .js            â”‚                               â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â•‘
â•‘         â”‚                         â”‚                                              â•‘
â•‘         â”‚ Ä°hale listesi           â”‚ DÃ¶kÃ¼man iÃ§erikleri                          â•‘
â•‘         â”‚ â€¢ ID, URL, BaÅŸlÄ±k       â”‚ â€¢ Ä°hale ilanÄ± (TEXT)                        â•‘
â•‘         â”‚ â€¢ Kurum, Åehir          â”‚ â€¢ Mal/Hizmet listesi (JSON)                 â•‘
â•‘         â”‚ â€¢ Tarih, Bedel          â”‚ â€¢ Zeyilname iÃ§eriÄŸi                         â•‘
â•‘         â”‚ â€¢ DÃ¶kÃ¼man butonlarÄ±     â”‚ â€¢ DÃ¼zeltme ilanÄ±                            â•‘
â•‘         â”‚                         â”‚ â€¢ PDF/DOCX linkleri                         â•‘
â•‘         â–¼                         â–¼                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                                       â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            2. STORAGE KATMANI                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                      PostgreSQL (Supabase)                              â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â•‘
â•‘   â”‚   â”‚   tenders   â”‚â”€â”€â”€â–¶â”‚  documents  â”‚â”€â”€â”€â–¶â”‚   notes     â”‚               â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â•‘
â•‘   â”‚         â”‚                  â”‚                                           â”‚   â•‘
â•‘   â”‚         â”‚                  â–¼                                           â”‚   â•‘
â•‘   â”‚         â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚   â•‘
â•‘   â”‚         â”‚          â”‚  analysis   â”‚                                     â”‚   â•‘
â•‘   â”‚         â”‚          â”‚  _result    â”‚                                     â”‚   â•‘
â•‘   â”‚         â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â•‘
â•‘   â”‚         â”‚                                                               â”‚   â•‘
â•‘   â”‚         â–¼                                                               â”‚   â•‘
â•‘   â”‚   â€¢ external_id (UNIQUE)                                               â”‚   â•‘
â•‘   â”‚   â€¢ announcement_content                                                â”‚   â•‘
â•‘   â”‚   â€¢ goods_services_content                                              â”‚   â•‘
â•‘   â”‚   â€¢ zeyilname_content                                                   â”‚   â•‘
â•‘   â”‚   â€¢ document_links (JSON)                                               â”‚   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                      Supabase Storage                                   â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚   documents/                                                            â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€ tender_123/                                                       â”‚   â•‘
â•‘   â”‚   â”‚   â”œâ”€â”€ idari_sartname.pdf                                           â”‚   â•‘
â•‘   â”‚   â”‚   â”œâ”€â”€ teknik_sartname.docx                                         â”‚   â•‘
â•‘   â”‚   â”‚   â””â”€â”€ birim_fiyat.xlsx                                             â”‚   â•‘
â•‘   â”‚   â””â”€â”€ tender_456/                                                       â”‚   â•‘
â•‘   â”‚       â””â”€â”€ ...                                                           â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                                       â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            3. PIPELINE KATMANI (v5.0)                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                    document-queue-processor.js                          â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚   â€¢ 30 saniye interval                                                  â”‚   â•‘
â•‘   â”‚   â€¢ Max 2 paralel dÃ¶kÃ¼man                                               â”‚   â•‘
â•‘   â”‚   â€¢ âš ï¸ ALTIN KURAL: ZIP dosyalarÄ± hariÃ§ tutulur!                       â”‚   â•‘
â•‘   â”‚   â€¢ Status: queued â†’ processing â†’ completed/failed                      â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                       â”‚                                          â•‘
â•‘                                       â–¼                                          â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         PIPELINE v5.0                                   â”‚   â•‘
â•‘   â”‚                    (ai-analyzer/pipeline/)                              â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â”‚   âš ï¸ ALTIN KURAL: ZIP â†’ Ã–nce Extraction â†’ Sonra Analiz                â”‚   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â•‘
â•‘   â”‚   â”‚ LAYER 1: EXTRACTION (extractor.js)                              â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   DOSYA TÃœRLERÄ°:                                               â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ Format â”‚ KÃ¼tÃ¼phane        â”‚ Ã‡Ä±ktÄ±                      â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ PDF    â”‚ pdf-parse        â”‚ text + pageCount           â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ DOCX   â”‚ mammoth          â”‚ text + html + tables       â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ DOC    â”‚ LibreOffice      â”‚ text                       â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ XLSX   â”‚ xlsx             â”‚ sheets[] (JSON yapÄ±)       â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ TXT    â”‚ fs.readFile      â”‚ text                       â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ IMAGE  â”‚ Claude Vision    â”‚ text (OCR)                 â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ ZIP    â”‚ unzip            â”‚ files[] (recursive)        â”‚  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   OCR TETÄ°KLEME: textDensity < 10 && fileSize > 100KB          â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â•‘
â•‘   â”‚                                   â”‚                                   â”‚   â•‘
â•‘   â”‚                                   â–¼                                   â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â•‘
â•‘   â”‚   â”‚ LAYER 2: SMART CHUNKING (chunker.js)                            â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   CHUNK TÃœRLERÄ°:                                               â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ text   â†’ Normal metin paragraflarÄ±                         â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ table  â†’ Tablo verileri (BÃ–LÃœNMEZ - atomik)                â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ header â†’ BaÅŸlÄ±k + iÃ§erik baÄŸlamÄ±                           â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   KURALLAR:                                                     â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ Max 3500 token/chunk (~5250 karakter)                      â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ Tablolar hiÃ§ bÃ¶lÃ¼nmez                                       â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ Paragraf sÄ±nÄ±rÄ±nda bÃ¶lme tercih edilir                     â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ BaÅŸlÄ±k baÄŸlamÄ± korunur                                      â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   EXCEL Ã–ZEL:                                                   â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ Her sayfa ayrÄ± chunk (kÃ¼Ã§Ã¼kse)                             â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ BÃ¼yÃ¼k sayfalar satÄ±rlara bÃ¶lÃ¼nÃ¼r                           â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â€¢ Header her chunk'ta tekrarlanÄ±r                            â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â•‘
â•‘   â”‚                                   â”‚                                   â”‚   â•‘
â•‘   â”‚                                   â–¼                                   â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â•‘
â•‘   â”‚   â”‚ LAYER 3: 2-AÅAMALI ANALÄ°Z (analyzer.js)                         â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ AÅAMA 1: HAIKU (Paralel)                                â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   Her chunk iÃ§in:                                       â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ Ã¶zet                                                â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ teknik_sartlar[]                                    â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ birim_fiyatlar[]                                    â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ tarihler[]                                          â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ miktarlar[]                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ onemli_notlar[]                                     â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   Concurrency: 4 paralel istek                          â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   Model: claude-haiku-4-5-20251001                      â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                           â”‚                                   â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                           â–¼                                   â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚ AÅAMA 2: SONNET (BirleÅŸtirme)                           â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   TÃ¼m chunk Ã¶zetleri birleÅŸtirilir:                     â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ Tekrar edenler temizlenir                           â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ Ã‡eliÅŸkiler belirlenir                               â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â€¢ Final analiz Ã¼retilir                               â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   Model: claude-sonnet-4-20250514                       â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   OPTÄ°MÄ°ZASYON:                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚   â‰¤2 chunk â†’ Direkt Sonnet (tek aÅŸama)                  â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â”‚                                                         â”‚ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                                                                 â”‚ â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                                       â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              4. API KATMANI                                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         Express.js Server                               â”‚   â•‘
â•‘   â”‚                         (src/server.js)                                 â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚   Port: 3001 | CORS | Helmet | Rate Limiting | Compression             â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                       â”‚                                          â•‘
â•‘                                       â–¼                                          â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         ROUTE DOSYALARI (72+ endpoint)                  â”‚   â•‘
â•‘   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â•‘
â•‘   â”‚   â”‚ scraper.js          â”‚ Scraper kontrol                           â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ POST /run, GET /status, POST /stop        â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ tenders.js          â”‚ Ä°hale CRUD                                â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ GET /, GET /:id, POST /, PUT /:id         â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ documents.js        â”‚ DÃ¶kÃ¼man yÃ¶netimi                          â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ POST /analyze-pipeline â­                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ POST /analyze (eski)                      â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ GET /supported-formats                    â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ tender-documents.js â”‚ Ä°hale-dÃ¶kÃ¼man iliÅŸkisi                    â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ GET /tender/:id, POST /upload             â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ tender-content-     â”‚ Ä°Ã§erik bazlÄ± dÃ¶kÃ¼manlar                   â”‚ â”‚   â•‘
â•‘   â”‚   â”‚ documents.js        â”‚ POST /analyze-batch (SSE)                 â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ GET /tender/:id/combined                  â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ tender-tracking.js  â”‚ Ä°hale takip                               â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ GET /:id/analysis                         â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ POST /:id/notes                           â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ tender-notes.js     â”‚ Not yÃ¶netimi                              â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ GET /, POST /, DELETE /:id                â”‚ â”‚   â•‘
â•‘   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â•‘
â•‘   â”‚   â”‚ content-extractor.jsâ”‚ ZIP Ã§Ä±karma                               â”‚ â”‚   â•‘
â•‘   â”‚   â”‚                     â”‚ POST /extract-zip                         â”‚ â”‚   â•‘
â•‘   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â•‘
â•‘   â”‚                                                                         â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                                       â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              5. FRONTEND (Beklemede)                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         React Dashboard                                 â”‚   â•‘
â•‘   â”‚                         (PlanlanÄ±yor)                                   â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Veri AkÄ±ÅŸ DiagramÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              VERÄ° AKIÅI                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. SCRAPING AKIÅI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ihalebul.com â”€â”€â–¶ Browser â”€â”€â–¶ Login â”€â”€â–¶ Liste Tarama â”€â”€â–¶ tenders tablosu
                   â”‚                         â”‚
                   â”‚                         â–¼
                   â”‚              DÃ¶kÃ¼man Ã‡ekme â”€â”€â–¶ document_links (JSON)
                   â”‚                         â”‚
                   â–¼                         â–¼
            session.json            announcement_content
                                   goods_services_content
                                   zeyilname_content


2. DÃ–KÃœMAN Ä°ÅLEME AKIÅI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
documents tablosu (status: queued)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Queue Processor                                      â”‚
â”‚   âš ï¸ ZIP dosyalarÄ± HARÄ°Ã‡ TUTULUR (ALTIN KURAL)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SUPABASE'DEN Ä°NDÄ°RME (v5.2)                                             â”‚
â”‚   storage_url mevcut ise:                                               â”‚
â”‚   Supabase Storage â”€â”€â–¶ HTTPS GET â”€â”€â–¶ /tmp/doc_{id}_{timestamp}.ext     â”‚
â”‚                                                                         â”‚
â”‚   âœ… Retry: 3 deneme (exponential backoff: 1s, 2s, 4s)                 â”‚
â”‚   âœ… Timeout: 120 saniye                                                â”‚
â”‚   âœ… Max Redirects: 5                                                   â”‚
â”‚   âœ… Progress Log: 5MB+ dosyalarda %20'lik log                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXTRACTION (temp dosya Ã¼zerinde)                                        â”‚
â”‚   PDF â”€â”€â–¶ pdf-parse â”€â”€â–¶ text                                           â”‚
â”‚   DOCX â”€â”€â–¶ mammoth â”€â”€â–¶ text + tables                                   â”‚
â”‚   XLSX â”€â”€â–¶ xlsx â”€â”€â–¶ JSON sheets                                        â”‚
â”‚   IMAGE â”€â”€â–¶ Claude Vision â”€â”€â–¶ OCR text                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHUNKING                                                                â”‚
â”‚   text â”€â”€â–¶ chunk[] (max 3500 token)                                    â”‚
â”‚   Tablolar bÃ¶lÃ¼nmez                                                     â”‚
â”‚   BaÅŸlÄ±k baÄŸlamÄ± korunur                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ANALYSIS                                                                â”‚
â”‚   chunk[] â”€â”€â–¶ Haiku (paralel) â”€â”€â–¶ Ã¶zet[]                              â”‚
â”‚   Ã¶zet[] â”€â”€â–¶ Sonnet â”€â”€â–¶ final_analysis                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
documents tablosu (status: completed)
   â€¢ extracted_text
   â€¢ analysis_result
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEMÄ°ZLÄ°K                                                                â”‚
â”‚   temp dosya silinir                                                    â”‚
â”‚   Supabase'deki orijinal dosya korunur                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3. DÃ–KÃœMAN DEPOLAMA AKIÅI (DETAY)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ihalebul.com (dÃ¶kÃ¼man linki)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ document-storage.js                                                     â”‚
â”‚   1. DÃ¶kÃ¼manÄ± indir (HTTP GET)                                          â”‚
â”‚   2. ZIP ise aÃ§, iÃ§indekileri Ã§Ä±kar                                     â”‚
â”‚   3. Supabase Storage'a yÃ¼kle                                           â”‚
â”‚      path: tenders/{tenderId}/{docType}/{timestamp}-{hash}-{name}.ext  â”‚
â”‚   4. documents tablosuna kaydet                                         â”‚
â”‚      â€¢ storage_path: Supabase path                                      â”‚
â”‚      â€¢ storage_url: Public URL                                          â”‚
â”‚      â€¢ processing_status: 'pending'                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
documents tablosu                    Supabase Storage
   â€¢ id                               tender-documents bucket
   â€¢ tender_id                        â””â”€â”€ tenders/
   â€¢ storage_path â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 123/tech_spec/file.pdf
   â€¢ storage_url â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ https://xxx.supabase.co/...
   â€¢ processing_status: 'queued'


4. API AKIÅI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Client â”€â”€â–¶ Express â”€â”€â–¶ Route â”€â”€â–¶ Service â”€â”€â–¶ Database â”€â”€â–¶ Response
                         â”‚
                         â–¼
                   SSE (streaming)
                   â€¢ progress events
                   â€¢ result event
```

---

## ğŸ“ Dosya YapÄ±sÄ±

```
ihale-motoru/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ scraper/                    # 1. SCRAPER KATMANI
â”‚   â”‚   â”œâ”€â”€ browser-manager.js      # Puppeteer singleton
â”‚   â”‚   â”œâ”€â”€ session-manager.js      # Cookie yÃ¶netimi
â”‚   â”‚   â”œâ”€â”€ login-service.js        # ihalebul.com login
â”‚   â”‚   â”œâ”€â”€ list-scraper.js         # Ä°hale listesi tarama
â”‚   â”‚   â”œâ”€â”€ document-scraper.js     # DÃ¶kÃ¼man iÃ§erik Ã§ekme
â”‚   â”‚   â”œâ”€â”€ runner.js               # CLI arayÃ¼zÃ¼
â”‚   â”‚   â””â”€â”€ core/
â”‚   â”‚       â””â”€â”€ auth.js             # Auth utilities
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                   # 3. PIPELINE KATMANI
â”‚   â”‚   â”œâ”€â”€ ai-analyzer/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js            # Public API
â”‚   â”‚   â”‚   â”œâ”€â”€ pipeline/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.js        # Pipeline orchestrator
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ extractor.js    # Layer 1
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chunker.js      # Layer 2
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ analyzer.js     # Layer 3
â”‚   â”‚   â”‚   â”œâ”€â”€ analyzers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pdf.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ office.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ image.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ text.js
â”‚   â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ client.js       # Claude client
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ prompts.js      # Prompt templates
â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â”‚       â””â”€â”€ parser.js       # JSON parsing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ document-queue-processor.js  # Queue manager
â”‚   â”‚   â”œâ”€â”€ document-analyzer.js    # Legacy analyzer
â”‚   â”‚   â”œâ”€â”€ document-storage.js     # Supabase storage
â”‚   â”‚   â”œâ”€â”€ document-download.js    # File downloader
â”‚   â”‚   â”œâ”€â”€ document.js             # Document service
â”‚   â”‚   â””â”€â”€ claude.js               # Claude wrapper
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                     # 4. API KATMANI
â”‚   â”‚   â”œâ”€â”€ scraper.js              # /api/scraper/*
â”‚   â”‚   â”œâ”€â”€ tenders.js              # /api/tenders/*
â”‚   â”‚   â”œâ”€â”€ documents.js            # /api/documents/*
â”‚   â”‚   â”œâ”€â”€ tender-documents.js     # /api/tender-documents/*
â”‚   â”‚   â”œâ”€â”€ tender-content-documents.js
â”‚   â”‚   â”œâ”€â”€ tender-tracking.js      # /api/tender-tracking/*
â”‚   â”‚   â”œâ”€â”€ tender-notes.js         # /api/tender-notes/*
â”‚   â”‚   â””â”€â”€ content-extractor.js    # /api/content/*
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ ai.config.js            # AI model ayarlarÄ±
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ logger.js               # Winston logger
â”‚   â”‚   â””â”€â”€ env-validator.js        # Env validation
â”‚   â”‚
â”‚   â”œâ”€â”€ database.js                 # PostgreSQL connection
â”‚   â”œâ”€â”€ supabase.js                 # Supabase client
â”‚   â””â”€â”€ server.js                   # Express app
â”‚
â”œâ”€â”€ storage/
â”‚   â””â”€â”€ session.json                # Cookie storage
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ 00-SYSTEM-ARCHITECTURE.md   # Bu dosya
â”‚   â”œâ”€â”€ 01-LISTE-SCRAPER.md
â”‚   â”œâ”€â”€ 02-SESSION-COOKIE.md
â”‚   â”œâ”€â”€ 03-DOCUMENT-SCRAPER.md
â”‚   â”œâ”€â”€ 04-API-ROUTES.md
â”‚   â””â”€â”€ 05-DOCUMENT-PIPELINE.md
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

---

## âš ï¸ ALTIN KURALLAR

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ALTIN KURALLAR                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   1. ZIP DOSYALARI DOÄRUDAN ANALÄ°ZE GÄ°TMEZ!                                    â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚      âŒ YANLIÅ: ZIP â†’ Analiz                                                   â”‚
â”‚      âœ… DOÄRU:  ZIP â†’ Extraction â†’ Ä°Ã§ Dosyalar â†’ Analiz                       â”‚
â”‚                                                                                 â”‚
â”‚   2. SESSION 8 SAAT GEÃ‡ERLÄ°                                                    â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚      SÃ¼re dolunca otomatik yeniden login                                       â”‚
â”‚                                                                                 â”‚
â”‚   3. TABLOLAR BÃ–LÃœNMEZ                                                         â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚      Tablo iÃ§eriÄŸi atomik birim olarak iÅŸlenir                                 â”‚
â”‚                                                                                 â”‚
â”‚   4. KÃœÃ‡ÃœK DÃ–KÃœMAN OPTÄ°MÄ°ZASYONU                                               â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚      â‰¤2 chunk â†’ Direkt Sonnet (Haiku atlanÄ±r)                                 â”‚
â”‚                                                                                 â”‚
â”‚   5. UPSERT PATTERN                                                            â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚      external_id ile INSERT ON CONFLICT DO UPDATE                              â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° Maliyet Optimizasyonu

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MALÄ°YET KARÅILAÅTIRMASI                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   ESKÄ° YÃ–NTEM (v4.0)                 YENÄ° YÃ–NTEM (v5.0)                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚   50 sayfa PDF                       50 sayfa PDF                              â”‚
â”‚   â†“                                  â†“                                         â”‚
â”‚   50 Ã— Sonnet API call               15 Ã— Haiku + 1 Ã— Sonnet                  â”‚
â”‚   â†“                                  â†“                                         â”‚
â”‚   ~$1.50                             ~$0.15                                    â”‚
â”‚                                                                                 â”‚
â”‚   TASARRUF: %90                                                                â”‚
â”‚                                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   MODEL FÄ°YATLARI (per 1K token):                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚   â”‚ Model        â”‚ Input      â”‚ Output      â”‚                                 â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚
â”‚   â”‚ Haiku        â”‚ $0.00025   â”‚ $0.00125    â”‚                                 â”‚
â”‚   â”‚ Sonnet       â”‚ $0.003     â”‚ $0.015      â”‚                                 â”‚
â”‚   â”‚ Opus         â”‚ $0.015     â”‚ $0.075      â”‚                                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§

```bash
# 1. Kurulum
npm install

# 2. Environment
cp .env.example .env
# .env dosyasÄ±nÄ± dÃ¼zenle

# 3. Server baÅŸlat
npm run dev

# 4. Ä°hale tara (1 sayfa test)
npm run scrape:list -- --pages 1

# 5. DÃ¶kÃ¼man analizi test
curl -X POST http://localhost:3001/api/documents/analyze-pipeline \
  -F "file=@test-dokuman.pdf"

# 6. Health check
curl http://localhost:3001/health
```

---

*Son gÃ¼ncelleme: 2026-02-02 | Pipeline v5.2 (Retry & Streaming)*
